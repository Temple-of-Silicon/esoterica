---
phase: 20-mobile-accessibility
plan: 02
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - site/src/pages/index.astro
  - site/src/styles/global.css
  - site/src/scripts/scroll-scrubber.js
autonomous: true

must_haves:
  truths:
    - "A scroll hint appears in the bottom-right of the hero after ~1.5 second delay"
    - "The scroll hint fades out when scroll progress exceeds 20%"
    - "The scroll hint is hidden entirely for reduced-motion users"
    - "The scroll hint has aria-hidden=true (decorative element)"
    - "Scroll hint animation only runs when motion is allowed"
  artifacts:
    - path: "site/src/pages/index.astro"
      provides: "Scroll hint DOM element inside hero-sticky"
      contains: "scroll-hint"
    - path: "site/src/styles/global.css"
      provides: "Scroll hint positioning, animation, reduced-motion hiding"
      contains: "scroll-hint"
    - path: "site/src/scripts/scroll-scrubber.js"
      provides: "Scroll hint fade-out logic tied to scroll progress"
      contains: "scroll-hint"
  key_links:
    - from: "site/src/scripts/scroll-scrubber.js"
      to: ".scroll-hint element"
      via: "querySelector + opacity change at progress > 0.2"
      pattern: "scroll-hint.*opacity"
    - from: "site/src/styles/global.css"
      to: "scroll hint visibility"
      via: "@media (prefers-reduced-motion: reduce) { .scroll-hint { display: none } }"
      pattern: "scroll-hint.*display.*none"
---

<objective>
Add a scroll hint to the hero section that communicates interactive scrolling.

Purpose: First-time visitors need a visual cue that the hero section responds to scrolling. The hint appears after a delay (letting the visual breathe), fades out as the user scrolls, and is completely hidden for reduced-motion users.

Output: Scroll hint element in index.astro, CSS styles and animations in global.css, fade-out logic in scroll-scrubber.js.
</objective>

<execution_context>
@/Users/jem/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jem/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-mobile-accessibility/20-CONTEXT.md
@.planning/phases/20-mobile-accessibility/20-RESEARCH.md
@.planning/phases/20-mobile-accessibility/20-01-SUMMARY.md
@site/src/pages/index.astro
@site/src/styles/global.css
@site/src/scripts/scroll-scrubber.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scroll hint element and CSS styles</name>
  <files>site/src/pages/index.astro, site/src/styles/global.css</files>
  <action>
1. **index.astro** -- Add a scroll hint element inside `.hero-sticky`, positioned after the `<footer>` and before the closing `</div>` of `.hero-sticky`. Use an SVG downward chevron:

   ```html
   <!-- Scroll Hint -->
   <div class="scroll-hint" aria-hidden="true">
     <svg viewBox="0 0 24 24" width="24" height="24" fill="none"
          stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
       <polyline points="6 9 12 15 18 9"/>
     </svg>
   </div>
   ```

   Place it as the LAST child of `.hero-sticky`, right before the closing `</div>`.

2. **global.css** -- Add scroll hint styles. Place these in the HERO section (after the `.hero-bg` rules, before the HEADER section). Add:

   a. Base scroll hint styles (no animation by default -- progressive enhancement):
      ```css
      .scroll-hint {
        position: absolute;
        bottom: 2rem;
        right: 2rem;
        z-index: 10;
        color: var(--text-hero-muted);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }
      ```

   b. Animation only when motion is allowed (wrap in no-preference query):
      ```css
      @media (prefers-reduced-motion: no-preference) {
        .scroll-hint {
          animation: hint-appear 0.6s ease 1.5s forwards,
                     hint-bounce 2s ease-in-out 2.1s infinite;
        }
      }
      ```

   c. Keyframe definitions (place right after the scroll-hint rules):
      ```css
      @keyframes hint-appear {
        to { opacity: 0.7; }
      }

      @keyframes hint-bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(6px); }
      }
      ```

   d. Verify that the existing `@media (prefers-reduced-motion: reduce)` block from Plan 01 already includes `.scroll-hint { display: none; }`. If not present, add it inside that media query block.
  </action>
  <verify>
- `index.astro` contains a `.scroll-hint` element with SVG chevron
- `index.astro` scroll hint has `aria-hidden="true"`
- `global.css` contains `.scroll-hint` base styles
- `global.css` contains `@media (prefers-reduced-motion: no-preference)` wrapping scroll hint animation
- `global.css` contains `hint-appear` and `hint-bounce` keyframes
- `global.css` reduced-motion block hides `.scroll-hint`
- Build succeeds: `cd site && npx astro build`
  </verify>
  <done>Scroll hint chevron positioned bottom-right of hero, appears after 1.5s delay with gentle bounce animation, completely hidden for reduced-motion users.</done>
</task>

<task type="auto">
  <name>Task 2: Add scroll hint fade-out logic to scroll scrubber</name>
  <files>site/src/scripts/scroll-scrubber.js</files>
  <action>
Modify `scroll-scrubber.js` to fade out the scroll hint as the user scrolls past 20% progress through the hero section.

1. After the existing `const hero` line (and after the reduced-motion early return from Plan 01), add a reference to the scroll hint element:
   ```javascript
   const scrollHint = document.querySelector('.scroll-hint');
   ```

2. Inside the `updateVideoTime()` function, after the line that sets `video.currentTime`, add scroll hint fade logic:
   ```javascript
   if (scrollHint) {
     if (progress > 0.2) {
       scrollHint.style.opacity = '0';
     } else {
       // Remove inline style so CSS animation controls appearance
       scrollHint.style.removeProperty('opacity');
     }
   }
   ```

   This works because:
   - At progress <= 0.2, removing the inline opacity lets the CSS `hint-appear` animation control visibility (fades in to 0.7 after 1.5s delay)
   - At progress > 0.2, setting opacity to '0' overrides the animation
   - The existing `.scroll-hint { transition: opacity 0.3s ease }` ensures smooth fade-out

   IMPORTANT: The `if (scrollHint)` guard prevents errors if the element is missing. Place this logic INSIDE `updateVideoTime()`, after the `video.currentTime` assignment but before the function closes.
  </action>
  <verify>
- `scroll-scrubber.js` contains `querySelector('.scroll-hint')`
- `scroll-scrubber.js` contains scroll hint fade logic checking `progress > 0.2`
- Build succeeds: `cd site && npx astro build`
- No console errors
  </verify>
  <done>Scroll hint fades out when user scrolls past 20% of the hero section, reappears if user scrolls back up. Logic is integrated into the existing rAF-throttled scroll handler (no second listener).</done>
</task>

</tasks>

<verification>
1. Build the site: `cd site && npx astro build` -- must succeed with zero errors
2. Verify scroll hint element: grep for `scroll-hint` in index.astro
3. Verify scroll hint CSS: grep for `scroll-hint` in global.css
4. Verify scroll hint JS: grep for `scroll-hint` in scroll-scrubber.js
5. Verify reduced-motion hiding: grep for `scroll-hint.*display.*none` in global.css
6. Verify animation wrapped in no-preference: grep for `no-preference` in global.css
</verification>

<success_criteria>
- Scroll hint SVG chevron exists inside .hero-sticky in index.astro
- Scroll hint has aria-hidden="true" for accessibility
- CSS animation appears after 1.5s delay with gentle bounce (motion-allowed only)
- JS fades hint out at >20% scroll progress through hero
- Scroll hint completely hidden for reduced-motion users (display: none)
- Site builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/20-mobile-accessibility/20-02-SUMMARY.md`
</output>
