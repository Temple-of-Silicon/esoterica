---
phase: 07-spread-options
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [skills/tarot/SKILL.md]
autonomous: true

must_haves:
  truths:
    - "Wizard Question 2 shows four options: Single card, Situation/Action/Outcome, Claude suggests, Custom"
    - "Single-card spread performs reading as before (regression preserved)"
    - "Three-card spread draws 3 unique cards for Situation/Action/Outcome positions"
    - "Positions are shown to user BEFORE cards are drawn"
  artifacts:
    - path: "skills/tarot/SKILL.md"
      provides: "Spread selection dispatch and three-card preset implementation"
      contains: ["shuf -i 0-21 -n 3", "Situation", "Action", "Outcome"]
  key_links:
    - from: "Wizard Question 2 response"
      to: "Spread dispatch logic"
      via: "Conditional spread handling section"
      pattern: "Single card.*Three card.*Claude suggests.*Custom"
---

<objective>
Update wizard spread options to match CONTEXT.md specifications and implement single-card preservation plus three-card preset spread with unique card drawing.

Purpose: Establish the core spread selection infrastructure that LLM-suggested and custom spreads will build upon.
Output: Working single-card and three-card spreads with proper wizard options and position preview.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-spread-options/07-CONTEXT.md
@.planning/phases/07-spread-options/07-RESEARCH.md
@.planning/phases/06-wizard-infrastructure/06-01-SUMMARY.md
@skills/tarot/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update wizard Question 2 spread options</name>
  <files>skills/tarot/SKILL.md</files>
  <action>
Update the wizard Question 2 (Spread) section to match CONTEXT.md requirements:

Current options to replace:
- "Single card (Recommended)" -> Keep, update description
- "Three card" -> Change to "Situation/Action/Outcome"
- "Custom spread" -> Change to "Custom"
- ADD new option: "Claude suggests"

New Question 2 structure:
```
Question 2 (Spread):
- question: "Which spread would you like for this reading?"
- header: "Spread"
- multiSelect: false
- options:
  - label: "Single card (Recommended)"
    description: "One card focus - quick insight, clear message"
  - label: "Situation/Action/Outcome"
    description: "Three cards - what's present, what you can do, where this leads"
  - label: "Claude suggests"
    description: "Claude generates three contextual positions based on your question"
  - label: "Custom"
    description: "Enter your own position names (1-5 cards)"
```

Note: Per CONTEXT.md, no explicit card counts in descriptions since they're self-evident from spread names.
  </action>
  <verify>Read SKILL.md and confirm Question 2 has four options with correct labels matching CONTEXT.md specifications.</verify>
  <done>Wizard Question 2 shows four spread options: Single card (Recommended), Situation/Action/Outcome, Claude suggests, Custom</done>
</task>

<task type="auto">
  <name>Task 2: Add spread dispatch section with single-card and three-card implementation</name>
  <files>skills/tarot/SKILL.md</files>
  <action>
Add a new section "## Spread Selection Logic" AFTER the "## Wizard: Collect Reading Parameters" section and BEFORE "## Reading Context".

This section implements spread handling based on wizard Question 2 response:

```markdown
## Spread Selection Logic

After wizard completes, process the spread selection from Question 2:

### Single Card Spread
If user selected "Single card (Recommended)":
- Positions: None (direct interpretation without position label)
- Draw one card using existing shell command: `!shuf -i 0-21 -n 1`
- Proceed directly to reading

### Three-Card Spread (Situation/Action/Outcome)
If user selected "Situation/Action/Outcome":
1. Show position preview:
   "You'll draw three cards for:
   1. **Situation** - What is present now
   2. **Action** - What you can do
   3. **Outcome** - Where this leads

   Drawing cards now..."

2. Draw three unique cards: `!shuf -i 0-21 -n 3`
   - First line = Situation card
   - Second line = Action card
   - Third line = Outcome card

3. Proceed to reading with positions and cards

### Claude Suggests Spread
If user selected "Claude suggests":
- (Implemented in Phase 7 Plan 02)
- For now: Fall back to single-card reading with note that this will be implemented

### Custom Spread
If user selected "Custom":
- (Implemented in Phase 7 Plan 02)
- For now: Fall back to single-card reading with note that this will be implemented
```

Update "## Reading Context" section:
- Keep existing single card draw for backward compatibility
- Add comment indicating spread selection determines actual draw behavior
- Update to reference spread selection logic above
  </action>
  <verify>Read SKILL.md and confirm: (1) Spread Selection Logic section exists between wizard and reading context, (2) Three-card spread shows position preview before drawing, (3) Uses `shuf -i 0-21 -n 3` for unique card draw.</verify>
  <done>Spread dispatch section handles single-card and three-card spreads; three-card shows positions first then draws 3 unique cards; Claude suggests and Custom have placeholder fallbacks.</done>
</task>

<task type="auto">
  <name>Task 3: Update Reading Instructions for multi-card spreads</name>
  <files>skills/tarot/SKILL.md</files>
  <action>
Update the "## Reading Instructions" section to handle multi-card spreads:

Add guidance after the existing "Assess context depth" item (before "Use the specified voice"):

```markdown
2. **Handle spread type** - Based on spread selection:
   - **Single card**: Interpret as one focused card (existing behavior)
   - **Three-card spread**: Interpret each card in its position context:
     * Situation: What patterns, energies, or realities are present
     * Action: What the querent can do, how to engage, what to bring
     * Outcome: Where current trajectory leads, what emerges from action

   For multi-card spreads, WEAVE the cards together - they tell ONE story, not three separate readings. Connect themes, note tensions between cards, show how they inform each other.
```

Update the reading structure template at the end to show multi-card format:

```markdown
**Multi-card reading structure (Situation/Action/Outcome):**

[Voice-appropriate opening bookend]

"You'll draw three cards for:
1. Situation - What is present now
2. Action - What you can do
3. Outcome - Where this leads"

**[Card 1 Name] as Situation**
[What this card reveals about current state]

**[Card 2 Name] as Action**
[What this card suggests about engagement]

**[Card 3 Name] as Outcome**
[Where current patterns + suggested action lead]

**The Story They Tell Together**
[Weave the three cards into one cohesive narrative - how do they relate?]

[Voice-appropriate closing with SPECIFIC reflective question]
```

Renumber subsequent items (old 2 becomes 3, old 3 becomes 4, etc.)
  </action>
  <verify>Read SKILL.md Reading Instructions and confirm: (1) Multi-card handling guidance exists, (2) Reading structure includes template for three-card format, (3) Instructions emphasize weaving cards together not separate interpretations.</verify>
  <done>Reading Instructions updated to handle multi-card spreads with position-aware interpretation and card weaving guidance.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `/tarot` wizard shows four spread options with correct labels
2. Selecting "Single card" performs reading as before (regression check)
3. Selecting "Situation/Action/Outcome" shows position preview then draws 3 unique cards
4. "Claude suggests" and "Custom" selections have placeholder behavior (implemented in Plan 02)
5. Three-card interpretation instructions guide position-aware reading with card weaving
</verification>

<success_criteria>
- Wizard Question 2 displays four spread options matching CONTEXT.md labels
- Single-card spread works identically to Phase 6 (preserved behavior)
- Three-card preset draws 3 unique cards using `shuf -i 0-21 -n 3`
- Positions (Situation/Action/Outcome) shown to user BEFORE cards are drawn
- Reading instructions include multi-card interpretation guidance
- SKILL.md structure supports Plan 02's LLM-suggested and Custom implementations
</success_criteria>

<output>
After completion, create `.planning/phases/07-spread-options/07-01-SUMMARY.md`
</output>
